ARG coshapp_ver
FROM archlinux/base:${coshapp_ver:-latest}
label maintainer="Okadarien Saru <okadas@dev.sysnk.net>"

RUN pacman -Sy --noconfirm sudo
RUN pacman -Sy --noconfirm mate xorg-server xorg-drivers
RUN pacman -Sy --noconfirm noto-fonts 
RUN pacman -Sy --noconfirm base-devel
RUN pacman -Sy --noconfirm git
RUN pacman -S --clean --noconfirm
RUN useradd -m auser
RUN usermod -g wheel auser
RUN sed -r -i -e "s/^#+[[:blank:]]+%wheel.+NOPASSWD.*/%wheel ALL=(ALL) NOPASSWD: ALL/g" /etc/sudoers
USER auser
WORKDIR /home/auser
CMD /bin/sh
